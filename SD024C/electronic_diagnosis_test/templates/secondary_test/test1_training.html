{% extends 'base.html' %}
{% load static %}
{% block content %}

<div class="container">
    <div class="text-lg-purple fs-2 mb-5" style="color: #5E2B8C;">الاختبار الفرعي الأول: دقة قراءة الكلمة المفردة</div>
    
    <div class="card rounded-card my-3 mx-auto">
        <div class="container  mt-4" style="direction: rtl;">
            <form method="post" action="{% url 'test1_training_sec' %}">
                {% csrf_token %}
                <div class="text-lg-purple fs-2 mb-5" style="color: #5E2B8C;">الفقرات التدريبية</div>
                {% if error %}
    <div class="alert alert-danger text-center fw-bold" role="alert">
        {{ error }}
    </div>
{% endif %}
                <div class="row mt-4 mx-auto text-center w-100">
                    
                    <!-- Column 1 (1–3) -->
                    <div class="">
                          
                        <table class="custom-reading-table">
                            <thead>
                                <tr>
                                    <th >م</th>
                                    <th >الكلمة</th>
                                    <th >✓</th>
                                </tr>
                            </thead>
                            <tbody >
                                {% for word in training_words %}
                                <tr>
                                    <td class="cell-number">{{ forloop.counter }}</td>
                                    <td class="cell-word"><div style="margin: 0 10px; ">{{ word }}</div></td>
                                    <td id="cell_{{ forloop.counter0 }}" class="score-cell cell-check" onclick="toggleCorrect({{ forloop.counter0 }})">
                                        ✓<input type="hidden" name="train_{{ forloop.counter0 }}" id="input_{{ forloop.counter0 }}" value="0">
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>


                <div class="col-12 mt-4">

                
                    <!-- Submit Button BELOW -->
                    <div class="d-grid mx-auto mt-5 mb-4" style="width: fit-content;">
                        <input id="end" type="submit" name="form1" class="btn-light-purple px-5 py-3 fs-5"
                        value="تسليم الاختبار" data-bs-toggle="modal" data-bs-target="#ModalSubmit"
                        style="background-color: #b48ce6; color: black; font-weight: bold;">
                    </div>
                
                </div>
                

                
                
              </form>
        </div>
    </div>
</div>


<script>

    function toggleCorrect(index) {
        const cell = document.getElementById("cell_" + index);
        const input = document.getElementById("input_" + index);

        if (input.value === "0") {
            input.value = "1";
            cell.classList.add("selected");
        } else {
            input.value = "0";
            cell.classList.remove("selected");
        }

        updateTotalScore();
    }

</script>


{% endblock %}
